<!DOCTYPE html>

<html>
    {% load static %}
    <head>
        <!--Link CSS documents for styling-->
        <link rel="stylesheet" type="text/css" href="{% static 'css/main/yb_modifiers.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/main/yb_inputs.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/main/yb_buttons.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/main/yb_animations.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/yb_accounts/onboarding.css' %}"/>
    
        <!--Page title welcoming user-->
        <title>Welcome, {{ user.first_name }}</title>
        
        <!--
            
            Maximum scale is set to 1 to prevent zooming when form fields are selected in the web version, 
            tests found traditional zooming is not prevented on any browser with setting enabled.
        
        -->
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1">
        <style>
            #confetti-wrapper {
                position: fixed;
                top: -100px;
                left: 0;
                width: 100%;
                height: calc(100% + 100px);
                overflow: hidden;
                
            }

            @keyframes transformUpDown {
                0% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0); }
            }
    
            .confetti {
                position: absolute;
                width: 8px;
                height: 13px;
                opacity: 0.7;
                animation: explode ease-out, fall linear infinite;
            }

            #intro-text {
                position: relative;
                transition: 1s;
                animation: transformUpDown 5s ease-in-out infinite;
            }

            #action-container {
                transition: 0.75s;
                transform: translateY(100vh);
            }

            #onboarding-logo {
                animation: scalePop 0.75s ease-in-out 1;
                animation-fill-mode: forwards;
            }

            @keyframes explode {
                0% { top: 0%; transform: scale(1); }
                100% { top: 120%; transform: scale(0.5); }
            }
    
            @keyframes fall {
                0% { transform: translateX(0) rotate(0deg); }
                100% { transform: translateX(100px) rotate(720deg); }
            }

            @keyframes colorBlast {
                0% { background-color: #fff; }
                25% { background-color: #ff0; }
                50% { background-color: #0ff; }
                75% { background-color: #0f0; }
                100% { background-color: #fff; }
            }



        </style>
    </head>

    <!--Import cropper js and styling-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" />
    
    
    <body>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script src="{% static 'js/yb_customize/yb_ajax.js' %}"></script>
    
        <div id="confetti-wrapper" class="black" style="z-index: 1;"></div>

        <script>
            document.addEventListener('DOMContentLoaded', (event) => {
                const confettiCount = 220;
                const colors = ['#f0f', '#ff0', '#0ff', '#0f0', '#00f', '#f00'];
                const confettiWrapper = document.getElementById('confetti-wrapper');
    
                for (let i = 0; i < confettiCount; i++) {
                    let confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.opacity = Math.random() + 0.3;
                    confetti.style.animationDuration = `${Math.random() * 8 + 2}s, ${Math.random() * 5 + 5}s`;
                    confetti.style.animationDelay = `0s, ${Math.random() * 2}s`;
    
                    confettiWrapper.appendChild(confetti);
                }
            });
        </script>
        <div id="container-1" class="yb-fillContainer" style="overflow-y: scroll; z-index: 2;">

            <!--Introduction-->
            <div id="onboarding-1" class="align-center yb-fillContainer">
                <div class="yb-relative yb-fillWidth" style="height: 40vh;" id="onboarding-header">
                    <img id="onboarding-logo" class="yb-center-transform all" style="position: absolute; height:15vh;" src="{% static 'images/main/yourbit-logo2023-01.svg' %}">
                </div>
                <h1 class="yb-autoText yb-margin-T30" id="intro-text" style="opacity: 0;">Welcome to Yourbit, {{ user.first_name }}!</h1>
                <div class="yb-fillWidth" id="action-container">
                    <p class="yb-autoText yb-margin-T30">Let's get your profile setup with some basics.</p>
                    <button type="button" id="onboarding-1-next" class="yb-button-flex green yb-autoText" style="width: 120px;" id="onboarding-start">Let's Go!</button>
                </div>

            </div>

            <!--Profile Image Menu-->
            <div id="onboarding-2" hidden>
                {% csrf_token %}
                <form id="profile-image-form" class="align-center">
                    <h3 id="onboarding-heading-1" class="yb-autoText">Let's start with the profile picture...</h3>
                    <div id="onboarding-image-container">
                        <svg class="yb-center-margin lr yb-relative yb-autoFill" xmlns="http://www.w3.org/2000/svg" height="256" viewBox="0 -960 960 960" width="256"><path d="M252-256q51-36 106.5-57T480-334q66 0 121.5 21T708-256q41-41 66.5-98T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 69 25.5 126t66.5 98Zm228-210q-48 0-81-33t-33-81q0-48 33-81t81-33q48 0 81 33t33 81q0 48-33 81t-81 33Zm0 334q-73 0-136.5-27T233-233q-47-47-74-110.5T132-480q0-73 27-136.5T233-727q47-47 110.5-74T480-828q73 0 136.5 27T727-727q47 47 74 110.5T828-480q0 73-27 136.5T727-233q-47 47-110.5 74T480-132Z"/></svg>
                    </div>
                    
                    
                    <input type="file" name="image" id="profile-image-upload" accept="image/*" onchange="previewProfileImage()" hidden>
                    <div id="profile-image-buttons" class="yb-fillWidth yb-flexColumn yb-gap5 align-center">
                        <button type="button" id="profile-trigger" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;">Upload Image</button>
                        
                        <button type="button" id="onboarding-2-next" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;" hidden>Skip For Now</button>
                        <button type="button" id="onboarding-2-back" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;">Back</button>
                    </div>
                </form>
            </div>

            <!--Profile image cropper-->
            <div class="yb-cropper-container profile-image yb-center-transform tb yb-fillWidth" style="transition: 0.5s;" id="square-crop-container" hidden>
                <div class = "yb-cropper-preview-container" style = "max-height: 75vh;">
                    <img id="profile-image-preview" style="object-fit: contain; max-width:100%; height: 100%; max-height: calc(100%-140px);"/>
                    <input type="hidden" id="cropper-output" value="">
                </div
                <div id="profile-cropper-submission-controls" class="align-center yb-margin-T10" style="width:100%; background-color: rgba(0, 0, 0, 0.5);">
                    <button id="profile-back-button" style="width: 120px;" class = "yb-button-flex yb-red font-white">Back</button>
                    <button id="image-cropper-save" class="yb-button-flex green font-white" type = "button" style="width: 120px;" name="inactive" data-type="none" data-class="none">Save</button>
                </div>  
            </div>




            <!--Background Image Menu-->
            <div id="onboarding-3" hidden>
                <form id="background-image-form" class="align-center">
                    <h3 id="onboarding-heading-2" class="yb-autoText">Would you like to add a background image?</h3>
                    <div id="onboarding-background-container">
                        <svg class="yb-center-margin lr yb-autoFill yb-relative" xmlns="http://www.w3.org/2000/svg" height="256" viewBox="0 -960 960 960" width="256"><path d="M224.615-160Q197-160 178.5-178.5 160-197 160-224.615v-510.77Q160-763 178.5-781.5 197-800 224.615-800h510.77Q763-800 781.5-781.5 800-763 800-735.385v510.77Q800-197 781.5-178.5 763-160 735.385-160h-510.77Zm0-40h510.77q9.23 0 16.923-7.692Q760-215.385 760-224.615v-510.77q0-9.23-7.692-16.923Q744.615-760 735.385-760h-510.77q-9.23 0-16.923 7.692Q200-744.615 200-735.385v510.77q0 9.23 7.692 16.923Q215.385-200 224.615-200ZM300-300h366.154L553.077-450.769 448.462-318.462l-70.001-84.615L300-300ZM200-200v-560 560Z"/></svg>
                    </div>
                    <div id="background-image-buttons" class="yb-fillWidth yb-flexColumn yb-gap5 align-center">
                        <button type="button" id="background-trigger" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;">Upload Image</button>
                        <input type="file" name="image" id="background-image-upload" accept="image/*" hidden>

                        <button type="button" id="onboarding-3-next" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;" hidden>Skip For Now</button>
                        <button type="button" id="onboarding-3-back" class="yb-button-flex bg-gray-dark yb-autoText yb-center-margin all" style="width: 70%; max-width: 225px;">Back</button>
                    </div>
                </form>
            </div>

            <div id="select-aspect-ratio" hidden>
                <div class="yb-fillWidth yb-flexColumn yb-gap5 align-center">
                    
                    <!--This section allows the user to crop the background image according to device, here they are selecting between the mobile and desktop options-->
                    <h3 id="onboarding-heading-crop" class="yb-autoText">Crop Background Image?</h3>
                    <h4 class="yb-autoText">Desktop</h4>
                    <div id="desktop-crop-option" onclick="previewDesktopBackgroundImage()" style="width: 320px; height: 180px; overflow:hidden;" class="bg-gray-dark squared yb-center-margin lr yb-relative pointer-object">
                        <p class="font-white yb-center-transform all squared black" style="z-index: 2; height: 30px; width: 120px; line-height: 1.75;">Click to Edit</p>
                        <img id="desktop-preview-output" style="z-index: 1; width: 100%; min-height:100%" class="yb-center-transform all" src="">
                    </div>
                    
                    <h4 class="yb-autoText">Mobile</h4>
                    <div id="mobile-crop-option" onclick="previewMobileBackgroundImage()" style="height: 570px; width: 270px; margin-bottom: 10px; overflow:hidden;" class="bg-gray-dark squared yb-center-margin lr yb-relative pointer-object" >
                        <p class="font-white yb-center-transform all squared black" style="z-index: 2; height: 30px; width: 120px; line-height: 1.75;">Click to Edit</p>
                        <img id="mobile-preview-output" style="z-index: 1; min-height:100%" class="yb-center-transform all" src="">
                    </div>

                    <button type="button" id="background-main-confirm" class="yb-button-flex yb-autoText yb-center-margin all green" style="width: 70%; max-width: 225px; margin-bottom: 20px;">Confirm</button>
                </div>
            </div>

            <div id="onboarding-4" hidden>
                <form class="align-center yb-flexColumn yb-gap10 align-center" method="POST">
                    {% csrf_token %}
                    <h3 class="yb-autoText">Now, let's setup some privacy settings...</h3>
                    <div class="yb-input-container">
                        
                        <label class="yb-autoText" for="display_real_name">Who can see your real name?</label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="real_name_visibility" id="display_real_name" name="real_name_visibility">
                            <option value="e">Everyone</option>
                            <option value="fo">Friends Only</option>
                            <option value="no">Nobody</option>
                        </select>

                    </div>
                    <br>
                    <div class="yb-input-container" style="display: none;">
                        <label class="yb-autoText" for="display_name">What would you like us to refer to you as instead?</label>
                        <input class="yb-input-singleLine rounded bg-gray-dark" type="text" name="display_name" id="display_name" placeholder="Display Name">
                    </div>
                    <br>
                    <div class="yb-input-container align-center">
                        <label class="yb-autoText" for="comment-privacy">Who can see your comments?</label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="comment_vsibility" id="comment-privacy">
                            <option value="e">Everyone</option>
                            <option value="fo">Friends Only</option>
                            <option value="no">Nobody</option>
                        </select>
                    </div>
                    <br>
                    <div class="yb-input-container align-center">
                        <label class="yb-autoText" for="message-permissions">Who can message you?</label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="message_availability" id="message-permissions">
                            <option value="e">Everyone</option>
                            <option value="fo">Friends Only</option>
                            <option value="no">Nobody</option>
                        </select>
                    </div>
                    <br>
                    <!--Allow Followers-->
                    <div class="yb-input-container align-center">
                        <label class="yb-autoText" for="allow-followers">
                            Do you want to allow followers? 
                            <br>
                            <small><i>Followers do not require 2 way confirmation, and can only see public posts.</i></small>
                        </label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="enable_followers" id="allow-followers">
                            <option value="True">Allow Followers</option>
                            <option value="False">Disallow Followers</option>
                        </select>
                    </div>
                    <br>
                    <!--Default Posting Public or Private-->
                    <div class="yb-input-container align-center">
                        <label class="yb-autoText" for="default-posting">
                            By default, do you want your posts to be public or private?
                            <br>
                            <small><i>Private posts can only be seen by you and your friends.</i></small>
                        </label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="default_public" id="default-posting">
                            <option value="True">Public</option>
                            <option value="False">Private</option>
                        </select>
                    </div>
                    <br>
                    <!--Search Visibility-->
                    <div class="yb-input-container" class="yb-input-container align-center">
                        <label class="yb-autoText" for="search-visibility"><small><i>Last one for this section...</small></i><br>Do you want to be visible in search, or found by link only?</label>
                        <br>
                        <select class="yb-input-select squared bg-gray-dark yb-autoText" name="searchable" id="search-visibility">
                            <option value="True">Visible</option>
                            <option value="False">Link Only</option>
                        </select>
                    </div>

                    <div id="privacy-buttons" class="yb-flexRow yb-center-margin all yb-gap10">
                        <button type="button" id="onboarding-4-back" class="yb-button-flex bg-gray-dark yb-autoText yb-relative" style="width: 120px;">Back</button>
                        <button type="submit" id="onboarding-4-next" class="yb-button-flex bg-gray-dark yb-autoText yb-relative" style="width: 120px;" hidden>Looks Good!</button>
                    </div>

                </form>
            </div>
            
        </div>

    </body>
    <script src="{% static 'scripts/yb_photo/yb_crop.js' %}"></script>
    <script src="{% static 'scripts/yb_systems/yb_sessions.js' %}"></script>
    <script src="{% static 'scripts/yb_customize/yb_ajax.js' %}"></script>
    <script src="{% static 'scripts/yb_accounts/onboarding.js' %}"></script>

</html>
