<!DOCTYPE html>
<div class="image-crop-container" id="crop-profile">
</div>
<head>
<title>Image Cropper</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/2.3.4/cropper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/2.3.4/cropper.min.css" />
</head>
<body>
<input type="file" id="image-input" onchange="previewImage()" />
<br />
<br />
<img id="image-preview" />
<br />
<br />
<button id="crop-button" onclick="cropImage()">Crop</button>

<script>
    var cropper;
    var preview = document.getElementById('image-preview');

    function previewImage() {
    var input = document.getElementById('image-input');
    var file = input.files[0];
    var reader = new FileReader();
    reader.onload = function(e) {
        preview.src = e.target.result;
        cropper = new Cropper(preview, {
        aspectRatio: 1,
        viewMode: 2,
        crop: function(event) {
            console.log(event.detail.width);
            console.log(event.detail.height);
        }
        });
    };
    reader.readAsDataURL(file);
    }

    function cropImage() {
    var canvas = cropper.getCroppedCanvas();
    preview.src = canvas.toDataURL();
    cropper.destroy();
    }
</script>
</body>