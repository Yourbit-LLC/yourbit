{% load static %}

<div id='div-header' class="div-header">
    <div class="cb-panel-back" onclick="yb_2WayPage(1)"><svg class="yb-center-margin tb" xmlns="http://www.w3.org/2000/svg" height="100%" viewBox="0 -960 960 960" width="24"><path class="yb-autoFill" d="M400-80 0-480l400-400 71 71-329 329 329 329-71 71Z"/></svg></div>
    <h3 class="yb-fillWidth yb-margin-L10 yb-autoText yb-center-margin tb"></h3>
    <div class='yb-button-close' id='cb-panel-close' onclick="yb_toggle2WayContainer('create-orbit');"><svg class="yb-center-transform all yb-icon small" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></div>
</div>

<div class="yb-flexColumn" id="messages-info">
    <svg class="yb-autoFill yb-center-margin lr" id="OBJECT" height="48px" viewBox="0 0 32 32" width="48px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><linearGradient id="linear-gradient" gradientUnits="userSpaceOnUse" x1="-.17" x2="31.06" y1="16" y2="16"><stop offset="0" stop-color="var(--yb-title-color)"/><stop offset="1" stop-color="var(--yb-icon-color)"/></linearGradient><linearGradient id="linear-gradient-2" x1="-.17" x2="31.06" xlink:href="#linear-gradient" y1="20.43" y2="20.43"/><linearGradient id="linear-gradient-3" x1="-.17" x2="31.06" xlink:href="#linear-gradient" y1="11.56" y2="11.56"/><linearGradient id="linear-gradient-5" x1="-.17" x2="31.06" xlink:href="#linear-gradient" y1="9.66" y2="9.66"/><linearGradient id="linear-gradient-6" x1="-.17" x2="31.06" xlink:href="#linear-gradient" y1="6" y2="6"/><linearGradient id="linear-gradient-7" x1="-.17" x2="31.06" xlink:href="#linear-gradient" y1="26" y2="26"/><path d="m6.06 15a9.24 9.24 0 0 0 -.06 1 10 10 0 1 0 10-10c-.35 0-.7 0-1.05 0l-1 .11.21 2 1-.11h.84a8 8 0 1 1 -8 8c0-.28 0-.56 0-.84l.11-1-2-.21z" fill="url(#linear-gradient)"/><path d="m30.06 10.8-.35-.94-1.88.7.35.94a13 13 0 0 1 -12.18 17.5 12.78 12.78 0 0 1 -4.5-.82l-.94-.34-.69 1.87.94.35a15 15 0 0 0 19.25-19.26z" fill="url(#linear-gradient-2)"/><path d="m3.82 20.5a12.78 12.78 0 0 1 -.82-4.5 13 13 0 0 1 13-13 12.69 12.69 0 0 1 4.49.82l.94.34.69-1.87-.93-.35a15 15 0 0 0 -19.25 19.25l.35.94 1.87-.7z" fill="url(#linear-gradient-3)"/><path d="m16 21a5 5 0 1 0 -5-5 5 5 0 0 0 5 5zm0-8a3 3 0 1 1 -3 3 3 3 0 0 1 3-3z" fill="url(#linear-gradient)"/><path d="m9.66 6.66a3 3 0 1 0 3 3 3 3 0 0 0 -3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1 -1 1z" fill="url(#linear-gradient-5)"/><path d="m26 9a3 3 0 1 0 -3-3 3 3 0 0 0 3 3zm0-4a1 1 0 1 1 -1 1 1 1 0 0 1 1-1z" fill="url(#linear-gradient-6)"/><path d="m6 23a3 3 0 1 0 3 3 3 3 0 0 0 -3-3zm0 4a1 1 0 1 1 1-1 1 1 0 0 1 -1 1z" fill="url(#linear-gradient-7)"/></svg>
    <b class="align-center yb-pHead" style="color:gray; font-size: 18px; letter-spacing: 2px;">Create Orbit</b>
    <p style="font-size: small; font-weight: 550; padding-left: 5px; padding-right: 5px; font-family: 'Roboto', sans-serif; text-align: center;" class="yb-autoText yb-pText">A public profile to host your brand, fan page, or just things you're interested in</p>
</div>


<div id="connection-list" class="yb-fillWidth yb-vScroll yb-margin-T10" style="height: calc(100% - 70px); border-radius: 15px;">
    <form id="create-orbit-form" class="yb-fillWidth align-center" action="/profile/create/orbit/" style="font-weight: 600;" method="POST">
        {% csrf_token %}
        <div id = "field-container-orbit-name" class="yb-field-container">
            <div id="co-field-container-name" class="yb-field-split top squared yb-bg-autoGray yb-autoText yb-pText yb-margin-T10">
                <p class="field-cover-label align-left" style="grid-column: 1;">Orbit Name: </p>
                <input name="name" id='co-field-name' class="yb-input-transparent yb-form-field right yb-autoText yb-pText account-field" style="grid-column: 2;" placeholder="My Cool Orbit">
            </div>
            
        
        </div>
        <div id = "field-container-orbit-username" class="yb-field-container">
            <div id="co-field-container-name" class="yb-field-split middle squared yb-bg-autoGray yb-autoText yb-pText yb-margin-T10">
                <p class="field-cover-label align-left" style="grid-column: 1;">Orbit Name: </p>
                <input name="username" id='co-field-username' placeholder="@coolorbit" class="yb-input-transparent yb-form-field right yb-autoText yb-pText account-field" style="grid-column: 2;">
            </div>
            
        
        </div>
        <div id="yb-field-container-contentType" class="yb-field-containter">
            <div id = "field-container-contentType" class="yb-field-container">
                <div id="cluster-type" class="yb-field-split bottom yb-autoText yb-bg-autoGray yb-pText" style="position: relative;">
                    <p class="field-cover-label align-left yb-pText" style="grid-column: 1;">Primary Content Type: </p>
                    <select type="text" class="yb-input-transparent right yb-autoText yb-pText privacy-field" name="type" id="co-field-type" style="grid-column: 2;">
                        <option value="any">Any</option>
                        <option value="chat">ChatBits</option>
                        <option value="photo">PhotoBits</option>
                        <option value="video">VideoBits</option>
                    </select>
                
                </div>
        </div>
        <br>
        <br>
        <br>
        <p class="yb-font-autoGray font-small" style="margin-left: 10px; margin-right: 10px;">Identifying a primary content type helps to classify your orbit for searches containing user media preferences.</p> 
        <br>
        <br>
        <button type="submit" id = "submit-create-orbit" width="100px" class="yb-button-flex green rounded font-white yb-center-margin lr">Create</button>

    </form>
</div>



<script>
    function createOrbit() {
        var form = $('#create-orbit-form');
        var url = form.attr('action');
        var data = form.serialize();
        tw_showLoading();
        $.post(url, data, function(response){
            if(response.success){
                let orbit = response.orbit;
                showNotification(expandNotification, 'Orbit created');
                yb_2WayPage(2, 'orbit-setup', orbit.id);
            } else {
                showNotification(expandNotification, 'Error creating orbit');
            }
        });
    }

    $(document).ready(function(){

        tw_hideLoading();

        //Submit form
        $('#create-orbit-form').submit(function(e){
            e.preventDefault();
            createOrbit();
        });
    });
</script>
