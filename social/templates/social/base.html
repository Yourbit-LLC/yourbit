<!--
    Yourbit Base Final:
    Base contains all core UI content such as the navigation bar, search, noifications, and user menus
    the elements contained in this file are available on every page across site, except for login pages.
    
    Developed by Austin Chaney
    05/07/2021

-->
{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <title>{%block title%}Yourbit | Home{%endblock%}</title>
        <link rel="stylesheet" type="text/css" href="{% static 'css/yourbit_core.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/yourbit_posts.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/notifications_yourbit.css' %}"/>
        <link rel="stylesheet" type="text/css" href="{% static 'css/search_results.css' %}"/>
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/favicon.ico'%}">
        {%block extend_styles%}{%endblock%}
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    </head>
    <body style="background-color:rgb(25,25,25); overflow-x:hidden;">
        
        <div class="notification-pop-up" id="non-interactive-notification-modal" style="color:white;">

        </div>

        <!--Mobile Header-->

        <div id="mobile-header">
            <img id="mobile-logo" src="{% static 'images/logo-flat.png'%}"/>
            <div id="visibility-mobile">
                <svg id="visibility-icon-mobile" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 16q1.875 0 3.188-1.312Q16.5 13.375 16.5 11.5q0-1.875-1.312-3.188Q13.875 7 12 7q-1.875 0-3.188 1.312Q7.5 9.625 7.5 11.5q0 1.875 1.312 3.188Q10.125 16 12 16Zm0-1.8q-1.125 0-1.912-.788Q9.3 12.625 9.3 11.5t.788-1.913Q10.875 8.8 12 8.8t1.913.787q.787.788.787 1.913t-.787 1.912q-.788.788-1.913.788Zm0 4.8q-3.65 0-6.65-2.038-3-2.037-4.35-5.462 1.35-3.425 4.35-5.463Q8.35 4 12 4q3.65 0 6.65 2.037 3 2.038 4.35 5.463-1.35 3.425-4.35 5.462Q15.65 19 12 19Z"/></svg>
                <div id="visibility-dropdown-mobile" style="display:none; font-size: 14px;">
                    <div id="options-container-mobile">
                        <p class="vis-option-text">Default Theme</p>
                        <label class="switch" id="theme" style="grid-column: 2;">
                            <input type="checkbox" class="checkbox" name="defaultTheme" id="defaultCheckMobile" >
                            <span class="slider round"></span>
                        </label>
                        <p class="vis-option-text">Bit Colors</p>
                            <label class="switch" id="theme" style="grid-column: 2;">
                                <input type="checkbox" class="checkbox" name="bitColor"id="postColorCheckMobile">
                                <span class="slider round"></span>
                            </label>
                        <p class="vis-option-text">Wallpaper</p>
                        <label class="switch" id="theme" style="grid-column: 2;">
                            <input class="checkbox" type="checkbox" name="wallpaper" id="wallpaperCheckMobile">
                            <span class="slider round"></span>
                        </label>
                        
                    </div>
                    <div class="all-settings-shortcut-container"><button type="button" class="all-settings-shortcut">Go To Settings</button></div>
                </div>
            </div>
        </div>

        <!--End mobile header -->
        {% csrf_token %}
        {% if user.is_authenticated %}
        

        <div width = "100%">
            {% block background-image%}
            {% if user.is_authenticated %}
                {% if user.profile.background_image %}
                    {% if wallpaper_on %}
                        <img class="bg-image" src = "{{ request.user.profile.background_image.url }}">
                    {% else %}
                        <div class="bg-image" style="background-color: rgb(25, 25, 25)"></div>
                    {% endif %}
                {% else %}
                    <div class="bg-image" style="background-color: rgb(25, 25, 25)"></div>
                {% endif %}
            {% else %}
                <div class="bg-image" style="background-color: rgb(25, 25, 25)"></div>
            {% endif %}
            {% endblock %}
            </div>        
            <nav class="navigation-bar">
                <img id = "logo-image" style="-webkit-filter: drop-shadow(0px 0px 10px black); filter: drop-shadow(0px 0px 10px black);" src="{% static 'images/yourbit-logo-modern.png' %}" href="{% url 'home' %}">
                <p id="logo-name" style="text-shadow: 0px 0px 5px black;">Yourbit</p>
                
                <script type="text/javascript" src="{% static 'scripts/spaceTracker.js' %}"></script>
                <div class = "space-navigator">
                    <!--Space navigator allows people to switch between content types on the network-->
                {% block space_navigator %}

                        <a id = "global-space-button" class = "space-button-active"><svg class="space-button-image"xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='space-button-icon' style="fill:{{icon_color}}" d="M5.35 17.9q-2.45 0-4.175-1.725-1.725-1.725-1.725-4.2 0-2.45 1.713-4.188Q2.875 6.05 5.35 6.05q1 0 1.937.325Q8.225 6.7 8.95 7.4l1.525 1.475L8.5 10.65 7.15 9.4q-.375-.35-.838-.525Q5.85 8.7 5.35 8.7q-1.35 0-2.3.962-.95.963-.95 2.338 0 1.35.95 2.3.95.95 2.3.95.5 0 .962-.175.463-.175.838-.525l7.9-7.15q.725-.7 1.663-1.025.937-.325 1.937-.325 2.45 0 4.175 1.725Q24.55 9.5 24.55 11.95q0 2.475-1.713 4.212Q21.125 17.9 18.65 17.9q-1 0-1.937-.325-.938-.325-1.663-1.025l-1.525-1.425 2-1.8 1.325 1.225q.375.35.838.525.462.175.962.175 1.35 0 2.3-.963.95-.962.95-2.337 0-1.35-.95-2.3-.95-.95-2.3-.95-.5 0-.962.175-.463.175-.838.525l-7.9 7.15q-.725.7-1.663 1.025-.937.325-1.937.325Z"/></svg><div class="helper" id="global-helper">All</div></a>
                    
                        <a id = "text-space-button" class = "space-button"><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='space-button-icon' style="fill:{{icon_color}}" d="M3 18v-2h12v2Zm0-5v-2h18v2Zm0-5V6h18v2Z"/></svg><div class="helper" id="chat-helper">Chats</div></a>
                    
                        <a id = "video-space-button" class = "space-button" ><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='space-button-icon' style="fill:{{icon_color}}" d="m9.15 17.15 8-5.15-8-5.15ZM12 22.8q-2.25 0-4.213-.85-1.962-.85-3.424-2.312Q2.9 18.175 2.05 16.212 1.2 14.25 1.2 12t.85-4.225Q2.9 5.8 4.363 4.338q1.462-1.463 3.424-2.301Q9.75 1.2 12 1.2t4.225.837q1.975.838 3.438 2.301 1.462 1.462 2.299 3.437Q22.8 9.75 22.8 12q0 2.25-.838 4.212-.837 1.963-2.299 3.426Q18.2 21.1 16.225 21.95q-1.975.85-4.225.85Zm0-2.65q3.425 0 5.788-2.363Q20.15 15.425 20.15 12t-2.362-5.788Q15.425 3.85 12 3.85q-3.425 0-5.787 2.362Q3.85 8.575 3.85 12q0 3.425 2.363 5.787Q8.575 20.15 12 20.15ZM12 12Z"/></svg><div class="helper" id="video-helper">Videos</div></a>
                    
                        <a id = "photo-space-button" class = "space-button"><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path class='space-button-icon' style="fill:{{icon_color}}" d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4.86 8.86l-3 3.87L9 13.14 6 17h12l-3.86-5.14z"/></svg><div class="helper" id="photo-helper">Photos</div></a>
                        
                        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
                        <script type="text/javascript">
                            var iframe;
                            var space = 0;
                            var space_list = ['global-feed', 'chat-feed', 'video-feed', 'photo-feed']
                            const global_feed_container = document.getElementById('global-feed');
                            const chat_feed_container = document.getElementById('chat-feed');
                            const video_feed_container = document.getElementById('video-feed');
                            const photo_feed_container = document.getElementById('photo-feed');
                            $('#global-space-button').click(function() {
                                let new_source = "{% url 'feed' 'global' '0' %}";
                                let next_iframe = 'global-feed'
                                let this_iframe = space_list[space];
                                document.getElementById('global-space-button').className = "space-button-active";
                                document.getElementById('text-space-button').className = "space-button";
                                document.getElementById('video-space-button').className = "space-button";
                                document.getElementById('photo-space-button').className = "space-button";
                                setFirstSpace();
                                if (space > 0) {
                                    swipeAwaySpaceRight(swipeIn, this_iframe, next_iframe, new_source);
                                } else {
                                    swipeAwaySpaceLeft(swipeIn, this_iframe, next_iframe, new_source);
                                }
                                space = 0;
                            });

                            $('#text-space-button').click(function() {
                                let new_source = "{% url 'feed' 'chatspace' '0' %}";
                                let next_iframe = 'chat-feed'
                                let this_iframe = space_list[space];
                                document.getElementById('text-space-button').className = "space-button-active";
                                document.getElementById('photo-space-button').className = "space-button";
                                document.getElementById('video-space-button').className = "space-button";
                                document.getElementById('global-space-button').className = "space-button";
                                setFirstSpace();
                                if (space > 1) {
                                    swipeAwaySpaceRight(swipeIn, this_iframe, next_iframe, new_source);
                                } else {
                                    swipeAwaySpaceLeft(swipeIn, this_iframe, next_iframe, new_source);
                                }
                                space = 1;
                            });

                            $('#photo-space-button').click(function() {
                                let new_source = "{% url 'feed' 'photospace' '0' %}";
                                let next_iframe = 'photo-feed';
                                let this_iframe = space_list[space];
                                document.getElementById('photo-space-button').className = "space-button-active";
                                document.getElementById('text-space-button').className = "space-button";
                                document.getElementById('video-space-button').className = "space-button";
                                document.getElementById('global-space-button').className = "space-button";
                                setFirstSpace();
                                swipeAwaySpaceLeft(swipeIn, this_iframe, next_iframe, new_source);
                                space = 3; 
                            });

                            $('#video-space-button').click(function() {
                                let new_source = "{% url 'feed' 'videospace' '0' %}";
                                let next_iframe = 'video-feed';
                                let this_iframe = space_list[space];
                                document.getElementById('video-space-button').className = "space-button-active";
                                document.getElementById('photo-space-button').className = "space-button";
                                document.getElementById('global-space-button').className = "space-button";
                                document.getElementById('text-space-button').className = "space-button";
                                setFirstSpace();
                               
                                if (space > 2) {
                                    swipeAwaySpaceRight(swipeIn, this_iframe, next_iframe, new_source);
                                } else {
                                    swipeAwaySpaceLeft(swipeIn, this_iframe, next_iframe, new_source);
                                }
                                space = 2;
                            });

                            function swipeAwaySpaceLeft(reposition, this_iframe, next_iframe, new_source) {
                                $(`#${this_iframe}`).animate({'left': '-100vw'}, 'fast');
                                $(`#${next_iframe}`).css({'left' : '100vw'})
                                $(`#${next_iframe}`).show();
                                let current_iframe = document.getElementById(this_iframe)
                                let iframe = document.getElementById(next_iframe)
                                iframe.src = new_source;
                                reposition(this_iframe, next_iframe, current_iframe);
                            }
                            function swipeAwaySpaceRight(reposition, this_iframe, next_iframe, new_source) {
                                $(`#${this_iframe}`).animate({'left': '100vw'}, 'fast');
                                $(`#${next_iframe}`).css({'left' : '-100vw'})
                                $(`#${next_iframe}`).show();
                                let current_iframe = document.getElementById(this_iframe)
                                let iframe = document.getElementById(next_iframe)
                                iframe.src = new_source;
                                reposition(this_iframe, next_iframe, current_iframe);
                            }

                            function swipeIn(this_iframe, next_iframe, current_iframe) {
                                console.log('function ran')
                                $(`#${next_iframe}`).animate({'left' : '0vw'});
                                setTimeout(hideIframe, 300, this_iframe, current_iframe);
                                

                                
                            }

                            function hideIframe(this_iframe, current_iframe) {
                                $(`#${this_iframe}`).hide();
                                current_iframe.src = '';
                            }
                        </script>
                {% endblock %}
                
                <div id='back-to-home' class='center-popout-button' style="display: none;">
                    <svg id='back-to-home-icon'xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m12 20-8-8 8-8 1.425 1.4-5.6 5.6H20v2H7.825l5.6 5.6Z"/></svg>
                    <p id='back-to-home-label'>Back to Feed</p>
                </div>
                <div id='gradiant-overlay'>
                </div>
                </div>
                <!-- End space navigator -->
                
                <!--Start Search-->

                <!--Search box must disappear at half width and become button until the button is clicked 
                    in which the search bar will expand to fill entire element-->

                <form class = "search" id = "search" method="POST" action="{% url 'search' %}">
                    {% csrf_token %}
                    <input id="full-url" type="hidden" name="last_page" value="{{ request.path }}">
                    {{ search_bar.query }}
                    <button class="search-button" id="search-button" name="search"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m19.825 21.65-6.35-6.35q-.75.575-1.837.912-1.088.338-2.213.338-2.975 0-5.037-2.062-2.063-2.063-2.063-5.038t2.063-5.038Q6.45 2.35 9.425 2.35t5.038 2.062q2.062 2.063 2.062 5.038 0 1.125-.312 2.15-.313 1.025-.913 1.825l6.375 6.375Zm-10.4-7.75q1.875 0 3.163-1.288 1.287-1.287 1.287-3.162t-1.287-3.163Q11.3 5 9.425 5 7.55 5 6.263 6.287 4.975 7.575 4.975 9.45q0 1.875 1.288 3.162Q7.55 13.9 9.425 13.9Z"/></svg></button>
                    <div id="search-options">
                        <div id="global-search"class="search-filter-option">All</div>
                        <div id="chat-search" class="search-filter-option">Chats</div>
                        <div id="video-search" class="search-filter-option">Videos</div>
                        <div id="photo-search" class="search-filter-option">Pics</div>
                        <div id="people-search" class="search-filter-option">People</div>
                        <div id="history-search" class="search-filter-option">History</div>
                        <div id="community-search" class="search-filter-option">Communities</div>
                    </div>
                </form>

                <!--End Search-->

                <!--Visibility Cointainer Mobile-->

                <div id="visibility">

                    <svg id="visibility-icon" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 16q1.875 0 3.188-1.312Q16.5 13.375 16.5 11.5q0-1.875-1.312-3.188Q13.875 7 12 7q-1.875 0-3.188 1.312Q7.5 9.625 7.5 11.5q0 1.875 1.312 3.188Q10.125 16 12 16Zm0-1.8q-1.125 0-1.912-.788Q9.3 12.625 9.3 11.5t.788-1.913Q10.875 8.8 12 8.8t1.913.787q.787.788.787 1.913t-.787 1.912q-.788.788-1.913.788Zm0 4.8q-3.65 0-6.65-2.038-3-2.037-4.35-5.462 1.35-3.425 4.35-5.463Q8.35 4 12 4q3.65 0 6.65 2.037 3 2.038 4.35 5.463-1.35 3.425-4.35 5.462Q15.65 19 12 19Z"/></svg>
                    <div class="helper" id="visibility-helper">Quick Appearance</div>
                    <div id="visibility-dropdown" style="display:none; font-size: 14px;">
                        <div id="options-container">
                            <p class="vis-option-text">Default Theme</p>
                            <label class="switch" id="theme" style="grid-column: 2;">
                                <input type="checkbox" class="checkbox" name="defaultTheme" id="defaultCheck" >
                                <span class="slider round"></span>
                            </label>
                            <p class="vis-option-text">Bit Colors</p>
                                <label class="switch" id="theme" style="grid-column: 2;">
                                    <input type="checkbox" class="checkbox" name="bitColor" id="postColorCheck">
                                    <span class="slider round"></span>
                                </label>
                            <p class="vis-option-text">Wallpaper</p>
                            <label class="switch" id="theme" style="grid-column: 2;">
                                <input class="checkbox" type="checkbox" name="wallpaper" id="wallpaperCheck">
                                <span class="slider round"></span>
                            </label>
                            
                        </div>
                        <div class="all-settings-shortcut-container"><button type="button" class="all-settings-shortcut">Go To Settings</button></div>
                    </div>
                </div>

                <!--

                    Quick Actions Bar:
                    -Create bit
                    -notifications
                    -messages

                -->
                <div class="profile-icon" id = "profile-icon" onclick="show_profile_menu()">
                    <img src="{{user_image.url}}" class="profile-icon" style="border-color: {{accent_color}};" id="profile-pic">
                </div>

                <form class = "nav-element" id="quick-actions" method="GET" action="{% url 'create-bit' %}">
                    {% csrf_token %}
                    <a class="quick-button" href="{% url 'messages' %}" id="messages-quick" ><svg xmlns="http://www.w3.org/2000/svg" class="quick-button-background" height="24" width="24"><path d="M3.85 20.75q-1.1 0-1.875-.775Q1.2 19.2 1.2 18.1V5.9q0-1.1.775-1.875.775-.775 1.875-.775h16.3q1.1 0 1.875.775.775.775.775 1.875v12.2q0 1.1-.775 1.875-.775.775-1.875.775ZM12 13.575 3.85 8.6v9.5h16.3V8.6ZM12 11l8.35-5.1H3.65ZM3.65 8.6V5.9v12.2H3.85h-.2Z"/></svg><div class="helper" id="messages-helper">Messages</div></a>
                    <div class="quick-button" id="notifications-quick" >
                        <div class="status-indicator" id="notification-status" style="display: none;">
                            <!--
                                Nothing goes in here, this div appears as a small red circle on the notifcation icon when new notifications exist
                            -->
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" class="quick-button-background" height="24" width="24">
                            <path d="M3.55 19.05V16.4h2.025v-6.375q0-2.15 1.263-3.863Q8.1 4.45 10.15 3.875v-.7q0-.775.538-1.313.537-.537 1.312-.537t1.312.537q.538.538.538 1.313v.7q2.05.575 3.313 2.287 1.262 1.713 1.262 3.863V16.4h2.025v2.65ZM12 11.325Zm0 11.325q-.95 0-1.625-.675T9.7 20.35h4.6q0 .95-.675 1.625T12 22.65ZM8.225 16.4h7.55v-6.375q0-1.575-1.1-2.675-1.1-1.1-2.675-1.1-1.575 0-2.675 1.1-1.1 1.1-1.1 2.675Z"/>
                        </svg>
                        <div class="helper" id="notification-helper">
                            Notifications
                        </div>

                        <!--

                            _______________Notifications_______________

                        -->
                        <div id='notifications-dropdown'>
                            <h3 style="margin-top:5px; margin-bottom: 2px;">Notifications</h3>
                            <hr>
                            {% if notification_length == 0 %}
                                <p style="font-size:14px; margin-top: 20px; margin-bottom: 10px; text-shadow: 1px 1px 10px rgba(255,255,255, 0.5);">No New Notifications</p>
                            {% else %}
                            {% for request_notification in friend_requests %}
                            <div class="interaction-notification" id="friend-request">
                                
                                <img class="notification-profile-image"src="{{ request_notification.from_user.profile.image.url }}">
                                <p class="interaction-notification-text">{{request_notification.from_user.first_name}} {{request_notification.from_user.last_name}} requested to be your friend!</p>
                                <div class="notification-response-button-container">
                                    <button type="submit" name="accept_friend" class="friend-request-response-button">Accept</button>
                                    <button type="submit" name="decline_friend" class="friend-request-response-button">Decline</button>
                                </div>
                            </div>
                            {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                    <input id="full-url" type="hidden" name="last_page" value="{{ request.path }}">
                    
                </form>
        

            </nav>
  
<!--
                    
                ****************************************   Profile Menu   ****************************************

                Profile Menu comes and goes when user clicks on the profile icon, contains links to user settings

                **************************************** {    yourbit    } ****************************************
-->
                <div class="profile-menu" id="profile-menu">

                    <a class="profile-name" href="{% url 'profile' user.username %}" id="profile-name">                    
                        <img src="{{ request.user.profile.image.url }}" class="profile-image-large" id="menu-profile-image">

                        <p id="profile-name-label">{{user.first_name}} {{user.last_name}}</p>
                        <p id="menu-username">@{{user.username}}</p>
                        
                        
                    </a>
                    <div id = "rewards-container">
                        <p id="balance-label" style="font-size: 12px;">Yourbit Rewards</p>
                        <p id="menu-rewards-balance">{{user.profile.point_balance}}<small>pts</small></p>
                    </div>
                    <div id="menu-notification-container">
                        <p id="no-notifications-message">No Notifications</p>
                    </div>


                    <!-- Menu Options for Navigation -->
                    
                    <div id="menu-options">
                        <div class="profile-menu-link" id = "home-link" ><a class="profile-menu-label" href="{% url 'home' %}" >                         
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24">
                                <path style="fill: {{icon_color}};" d="M4 21V9l8-6 8 6v12h-6v-7h-4v7Zm2-2h2v-7h8v7h2v-9l-6-4.5L6 10Zm6-6.75Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">Home</p>
                        </a></div>
                        <div class="profile-menu-link" id = "message-link"><a class="profile-menu-label" href="{% url 'messages' %}">
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='profile-menu-icon' style="fill:{{icon_color}};" d="M4 20q-.825 0-1.412-.587Q2 18.825 2 18V6q0-.825.588-1.412Q3.175 4 4 4h16q.825 0 1.413.588Q22 5.175 22 6v12q0 .825-.587 1.413Q20.825 20 20 20Zm8-7L4 8v10h16V8Zm0-2 8-5H4ZM4 8V6v12Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none;  color:{{icon_color}};">Messages</p>
                        </a></div> 
                        <div class="profile-menu-link" id= "stuff-link"><a class="profile-menu-label" href="{% url 'stuff' %}">
                            
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='profile-menu-icon' style="fill:{{icon_color}};" d="M4 20q-.825 0-1.412-.587Q2 18.825 2 18V6q0-.825.588-1.412Q3.175 4 4 4h6l2 2h8q.825 0 1.413.588Q22 7.175 22 8H11.175l-2-2H4v12l2.4-8h17.1l-2.575 8.575q-.2.65-.737 1.038Q19.65 20 19 20Zm2.1-2H19l1.8-6H7.9Zm0 0 1.8-6-1.8 6ZM4 8V6v2Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">Inventory</p>
                        </a>
                        </div>
                        
                        <div class="profile-menu-link" id="history-link">
                        <a class="profile-menu-label" href="{% url 'history' 'liked' %}">
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='profile-menu-icon' style="fill:{{icon_color}};" d="M12 21q-3.45 0-6.012-2.288Q3.425 16.425 3.05 13H5.1q.35 2.6 2.312 4.3Q9.375 19 12 19q2.925 0 4.962-2.038Q19 14.925 19 12t-2.038-4.963Q14.925 5 12 5q-1.725 0-3.225.8T6.25 8H9v2H3V4h2v2.35q1.275-1.6 3.113-2.475Q9.95 3 12 3q1.875 0 3.513.712 1.637.713 2.85 1.925 1.212 1.213 1.925 2.85Q21 10.125 21 12t-.712 3.512q-.713 1.638-1.925 2.85-1.213 1.213-2.85 1.926Q13.875 21 12 21Zm2.8-4.8L11 12.4V7h2v4.6l3.2 3.2Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none;  color:{{icon_color}};">History</p>
                        </a></div>
                        
                        <div class="profile-menu-link" id= "rewards-link"><a class="profile-menu-label" href="{% url 'rewards' %}">
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path class='profile-menu-icon' style="fill:{{icon_color}};"d="m8.85 17.825 3.15-1.9 3.15 1.925-.825-3.6 2.775-2.4-3.65-.325-1.45-3.4-1.45 3.375-3.65.325 2.775 2.425ZM5.825 22l1.625-7.025L2 10.25l7.2-.625L12 3l2.8 6.625 7.2.625-5.45 4.725L18.175 22 12 18.275ZM12 13.25Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none;  color:{{icon_color}};">Rewards</p>
                        </a></div>
                        
                        <div class="profile-menu-link" id="settings-link" ><a class="profile-menu-label" href="{% url 'mysettings' %}">
                            <svg class='profile-menu-icon' style="grid-column: 1;" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path style="fill:{{icon_color}};" d="m9.25 22-.4-3.2q-.325-.125-.612-.3-.288-.175-.563-.375L4.7 19.375l-2.75-4.75 2.575-1.95Q4.5 12.5 4.5 12.337v-.675q0-.162.025-.337L1.95 9.375l2.75-4.75 2.975 1.25q.275-.2.575-.375.3-.175.6-.3l.4-3.2h5.5l.4 3.2q.325.125.613.3.287.175.562.375l2.975-1.25 2.75 4.75-2.575 1.95q.025.175.025.337v.675q0 .163-.05.338l2.575 1.95-2.75 4.75-2.95-1.25q-.275.2-.575.375-.3.175-.6.3l-.4 3.2Zm2.8-6.5q1.45 0 2.475-1.025Q15.55 13.45 15.55 12q0-1.45-1.025-2.475Q13.5 8.5 12.05 8.5q-1.475 0-2.488 1.025Q8.55 10.55 8.55 12q0 1.45 1.012 2.475Q10.575 15.5 12.05 15.5Zm0-2q-.625 0-1.062-.438-.438-.437-.438-1.062t.438-1.062q.437-.438 1.062-.438t1.063.438q.437.437.437 1.062t-.437 1.062q-.438.438-1.063.438ZM12 12Zm-1 8h1.975l.35-2.65q.775-.2 1.438-.588.662-.387 1.212-.937l2.475 1.025.975-1.7-2.15-1.625q.125-.35.175-.738.05-.387.05-.787t-.05-.788q-.05-.387-.175-.737l2.15-1.625-.975-1.7-2.475 1.05q-.55-.575-1.212-.963-.663-.387-1.438-.587L13 4h-1.975l-.35 2.65q-.775.2-1.437.587-.663.388-1.213.938L5.55 7.15l-.975 1.7 2.15 1.6q-.125.375-.175.75-.05.375-.05.8 0 .4.05.775t.175.75l-2.15 1.625.975 1.7 2.475-1.05q.55.575 1.213.962.662.388 1.437.588Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">Settings</p>
                        </a></div>
                        <div class="profile-menu-link" id="connections-link" ><a class="profile-menu-label" href="{% url 'mysettings' %}">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path style="fill:{{icon_color}};" d="M1 20v-2.8q0-.85.438-1.563.437-.712 1.162-1.087 1.55-.775 3.15-1.163Q7.35 13 9 13t3.25.387q1.6.388 3.15 1.163.725.375 1.162 1.087Q17 16.35 17 17.2V20Zm18 0v-3q0-1.1-.612-2.113-.613-1.012-1.738-1.737 1.275.15 2.4.512 1.125.363 2.1.888.9.5 1.375 1.112Q23 16.275 23 17v3ZM9 12q-1.65 0-2.825-1.175Q5 9.65 5 8q0-1.65 1.175-2.825Q7.35 4 9 4q1.65 0 2.825 1.175Q13 6.35 13 8q0 1.65-1.175 2.825Q10.65 12 9 12Zm10-4q0 1.65-1.175 2.825Q16.65 12 15 12q-.275 0-.7-.062-.425-.063-.7-.138.675-.8 1.037-1.775Q15 9.05 15 8q0-1.05-.363-2.025Q14.275 5 13.6 4.2q.35-.125.7-.163Q14.65 4 15 4q1.65 0 2.825 1.175Q19 6.35 19 8ZM3 18h12v-.8q0-.275-.137-.5-.138-.225-.363-.35-1.35-.675-2.725-1.013Q10.4 15 9 15t-2.775.337Q4.85 15.675 3.5 16.35q-.225.125-.362.35-.138.225-.138.5Zm6-8q.825 0 1.413-.588Q11 8.825 11 8t-.587-1.412Q9.825 6 9 6q-.825 0-1.412.588Q7 7.175 7 8t.588 1.412Q8.175 10 9 10Zm0 8ZM9 8Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">Connections</p>
                        </a></div>
                        <div class="profile-menu-link" id="community-link" ><a class="profile-menu-label" href="{% url 'mysettings' %}">
                            <svg class='profile-menu-icon' xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path style="fill:{{icon_color}};"d="M1 20v-4q0-.85.588-1.425Q2.175 14 3 14h3.275q.5 0 .95.25.45.25.725.675.725.975 1.788 1.525Q10.8 17 12 17q1.225 0 2.288-.55 1.062-.55 1.762-1.525.325-.425.762-.675.438-.25.913-.25H21q.85 0 1.425.575Q23 15.15 23 16v4h-7v-2.275q-.875.625-1.887.95Q13.1 19 12 19q-1.075 0-2.1-.337-1.025-.338-1.9-.963V20Zm11-4q-.95 0-1.8-.438-.85-.437-1.425-1.212-.425-.625-1.062-.987Q7.075 13 6.325 13q.55-.925 2.325-1.463Q10.425 11 12 11q1.575 0 3.35.537 1.775.538 2.325 1.463-.725 0-1.375.363-.65.362-1.075.987-.55.8-1.4 1.225Q12.975 16 12 16Zm-8-3q-1.25 0-2.125-.875T1 10q0-1.275.875-2.138Q2.75 7 4 7q1.275 0 2.138.862Q7 8.725 7 10q0 1.25-.862 2.125Q5.275 13 4 13Zm16 0q-1.25 0-2.125-.875T17 10q0-1.275.875-2.138Q18.75 7 20 7q1.275 0 2.138.862Q23 8.725 23 10q0 1.25-.862 2.125Q21.275 13 20 13Zm-8-3q-1.25 0-2.125-.875T9 7q0-1.275.875-2.138Q10.75 4 12 4q1.275 0 2.137.862Q15 5.725 15 7q0 1.25-.863 2.125Q13.275 10 12 10Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">Communities</p>
                        </a></div>

                        <div class="profile-menu-link" id="more-link" ><a class="profile-menu-label" href="{% url 'mysettings' %}">
                            <svg class='profile-menu-icon' xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path style="fill:{{icon_color}}" d="M6 14q-.825 0-1.412-.588Q4 12.825 4 12t.588-1.413Q5.175 10 6 10t1.412.587Q8 11.175 8 12q0 .825-.588 1.412Q6.825 14 6 14Zm6 0q-.825 0-1.412-.588Q10 12.825 10 12t.588-1.413Q11.175 10 12 10t1.413.587Q14 11.175 14 12q0 .825-.587 1.412Q12.825 14 12 14Zm6 0q-.825 0-1.413-.588Q16 12.825 16 12t.587-1.413Q17.175 10 18 10q.825 0 1.413.587Q20 11.175 20 12q0 .825-.587 1.412Q18.825 14 18 14Z"/></svg>
                            <p class='profile-menu-link-text' style="grid-column: 2; text-decoration: none; color:{{icon_color}};">More</p>
                        </a></div>
                            
                    </div>

                    <!--Logout Button-->
                    <div class="logout-button"><a class="logout-button-link" id="logout-link" href="/logout">Logout</a></div>

                    <!--Menu Exit-->
                    <div id="mobile-exit-button" onclick="show_profile_menu()">&times;</div>
                </div>


                <!--Create Bit Desktop-->

                <div id="desktop-create-bit">

                </div>
                <div id="info-divider" style="display: none; bottom: 0; left: 0; width: 100vw; height: 200vw; position: fixed; z-index: 26; -webkit-backdrop-filter: blur(100px) brightness(50%); backdrop-filter: blur(100px) brightness(50%); transition: 1s;">
                </div>

                <!--

                    **********************   Mobile Popout Buttons *************************

                -->
                    <!--Create Bit Mobile Button-->

                    <div id="mobile-create-button" style="border-color: {{icon_color}}; background-color: rgb(75,75,75);" class="mobile-floating-actions">
                        <svg id="mobile-create-icon" xmlns="http://www.w3.org/2000/svg" height="40" width="40"><path class='mobile-floating-actions-path' style="fill:{{icon_color}}" d="M7.792 39.5q-1.125 0-1.959-.833Q5 37.833 5 36.708V12.292q0-1.125.833-1.959.834-.833 1.959-.833H24l-2.792 2.792H7.792v24.416h24.416v-13.5L35 20.417v16.291q0 1.125-.833 1.959-.834.833-1.959.833ZM20 24.5Zm7.375-14.458 2 1.958-11.583 11.542v3.166h3.125l11.625-11.625 1.958 1.959L22.083 29.5H15v-7.083Zm7.125 7-7.125-7 4.167-4.167q.791-.792 1.958-.792 1.167 0 2 .834l3.083 3.125q.792.833.792 1.979 0 1.146-.792 1.937Z"/></svg>
                    </div>

                    <!--Search Mobile Button-->
                    <div id="mobile-search-button" style="border-color: {{icon_color}}; background-color: rgb(75,75,75);" class="mobile-floating-actions" href="{% url 'search' %}">
                        <svg id="mobile-search-icon" xmlns="http://www.w3.org/2000/svg" height="40" width="40"><path class='mobile-floating-actions-path' style="fill:{{icon_color}}" d="M33 34.958 22.208 24.167q-1.25 1.041-2.916 1.645-1.667.605-3.5.605-4.542 0-7.667-3.125T5 15.708q0-4.458 3.125-7.604t7.625-3.146q4.458 0 7.583 3.146t3.125 7.604q0 1.792-.583 3.438-.583 1.646-1.708 3.062L35 32.958ZM15.75 23.625q3.292 0 5.604-2.313 2.313-2.312 2.313-5.604 0-3.291-2.313-5.625Q19.042 7.75 15.75 7.75q-3.333 0-5.646 2.333-2.312 2.334-2.312 5.625 0 3.292 2.312 5.604 2.313 2.313 5.646 2.313Z"/></svg>
                    </div>
                

                <!--

                    ***********************   Large Bubble   ********************************
                            Contains information for tutorials, bits, or friend requests

                -->
                <div id="learn-bubble" class="large-bubble" style="display:none; height:0; width:0; z-index: 28;">
                    {% block bubble_content %}
                    {% endblock %}
                </div>

<!--

                    **********************  Small Bubble ****************************
    
-->

                <div id="small-bubble" style="display:none; height: 0; width: 0; z-index: 28; background-color:black; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); border-radius:20px; text-align: center; ">
                    <div id="notification-bubble-text" style="position: relative; display: block; height: fit-content; width: 250px; margin: auto;">
                    </div>
                </div>


                <!--


                    ***********************  Create Bit Mobile  *****************************

                -->                    
                <div id="cb-divider" style="display: none; bottom: 0; left: 0; width: 100vw; height: 200vw; position: fixed; z-index: 24; -webkit-backdrop-filter: brightness(35%); backdrop-filter: brightness(25%);">
                </div>
                <form class="mobile-slide-up-panel" id="create-bit-mobile" style="overflow-y: scroll;">
                    
                    <svg id="bit-panel-close" xmlns="http://www.w3.org/2000/svg" height="40" width="40"><path d="m20 25.625-10-10 1.958-1.958L20 21.708l8.042-8.041 1.958 2Z"/></svg>
                    
                    <hr style="margin-top:0px;">
                    <h3 id='create-bit-header' style="margin-top:10px; margin-bottom: 10px;">Create Chat Bit</h3>
                    <input type="hidden" id="bit-type-hidden-field" value="chat">
                    <!--Chat Bit Input Fields-->
                    <div id="mobile-bit-inputs" >
                        <input type="text" class="single-line-input" id="mobile-title" placeholder="Title (Optional)" style="color:white; font-size: 16px; font-weight: 600;">
                        <textarea  type="text" id="mobile-body" placeholder="Body" style="color:white; font-size: 14px;"></textarea>
                    </div>

                    <div class="slide-up-button-container">
                        <div id="create-bit-type-mobile" style="z-index: 4;">
                    
                            <a id = "text-type-button" class = "type-button-active" onclick="changeBitForm('chat')"><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M.95 17.8V1.85q0-.5.325-.825Q1.6.7 2.1.7h14.25q.5 0 .825.325.325.325.325.825V12q0 .5-.325.825-.325.325-.825.325H5.6Zm5.8.9q-.5 0-.825-.325-.325-.325-.325-.825v-2.4h13.9V5.4h2.4q.5 0 .825.325.325.325.325.825v16.8L18.4 18.7Zm8.1-15.35H3.6v8.05l.9-.9h10.35Zm-11.25 0v8.05Z"/></svg></a>

                            <a id = "video-type-button" class = "type-button" name = 'video' onclick="changeBitForm('video')"><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="m9.15 17.15 8-5.15-8-5.15ZM12 22.8q-2.25 0-4.213-.85-1.962-.85-3.424-2.312Q2.9 18.175 2.05 16.212 1.2 14.25 1.2 12t.85-4.225Q2.9 5.8 4.363 4.338q1.462-1.463 3.424-2.301Q9.75 1.2 12 1.2t4.225.837q1.975.838 3.438 2.301 1.462 1.462 2.299 3.437Q22.8 9.75 22.8 12q0 2.25-.838 4.212-.837 1.963-2.299 3.426Q18.2 21.1 16.225 21.95q-1.975.85-4.225.85Zm0-2.65q3.425 0 5.788-2.363Q20.15 15.425 20.15 12t-2.362-5.788Q15.425 3.85 12 3.85q-3.425 0-5.787 2.362Q3.85 8.575 3.85 12q0 3.425 2.363 5.787Q8.575 20.15 12 20.15ZM12 12Z"/></svg></a>
                    
                            <a id = "photo-type-button" class = "type-button" name = 'photo' onclick="changeBitForm('photo')"><svg class="space-button-image" xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M12 17.75q1.925 0 3.263-1.337Q16.6 15.075 16.6 13.15q0-1.925-1.337-3.263Q13.925 8.55 12 8.55q-1.925 0-3.262 1.337Q7.4 11.225 7.4 13.15q0 1.925 1.338 3.263Q10.075 17.75 12 17.75Zm0-2.65q-.8 0-1.375-.575t-.575-1.375q0-.8.575-1.375T12 11.2q.8 0 1.375.575t.575 1.375q0 .8-.575 1.375T12 15.1Zm-8.15 6.725q-1.1 0-1.875-.775-.775-.775-.775-1.875V7.125q0-1.1.775-1.875.775-.775 1.875-.775h3.025l2.05-2.25h6.15l2.05 2.25h3.025q1.1 0 1.875.775.775.775.775 1.875v12.05q0 1.1-.775 1.875-.775.775-1.875.775Zm16.3-2.65V7.125h-4.2l-2.05-2.25h-3.8l-2.05 2.25h-4.2v12.05ZM12 13.15Z"/></svg></a>
                        </div>
                        <button  id="mobile-publish-bit" style="background-color: {{icon_color}};" name = "chat" type="button">Publish</button>
                    </div>
                </form>
<!--

                ***************************  Search Mobile  *********************************

-->
                <div class="mobile-slide-up-panel" id="search-mobile">
                    <div id="mobile-instant-results">
                    </div>
                    <div class="mobile-search-form">
                        <input style="color:white" type="text" class="single-line-input" placeholder="Search Yourbit" id="mobile-searchbar">
                        <button type="button" class="wide-submit" id='mobile-submit-search-button' style="background-color:{{icon_color}}"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path style="fill:white" d="m19.825 21.65-6.35-6.35q-.75.575-1.837.912-1.088.338-2.213.338-2.975 0-5.037-2.062-2.063-2.063-2.063-5.038t2.063-5.038Q6.45 2.35 9.425 2.35t5.038 2.062q2.062 2.063 2.062 5.038 0 1.125-.312 2.15-.313 1.025-.913 1.825l6.375 6.375Zm-10.4-7.75q1.875 0 3.163-1.288 1.287-1.287 1.287-3.162t-1.287-3.163Q11.3 5 9.425 5 7.55 5 6.263 6.287 4.975 7.575 4.975 9.45q0 1.875 1.288 3.162Q7.55 13.9 9.425 13.9Z"/></svg></button>
                    </div>
                </div>

                <!--Block for various page content within base page-->
            
                {% block content %}
                {% endblock %}

                {% else %}
                    <!--If not logged in-->
                    <div id="not-auth-error" class="notAuthError">
                        <div>
                            <h1>Oops!</h1>
                            <p>It looks like you arent logged in...</p>
                            <a href="/login">Log in</a>
                        </div>
                    </div>  
            {% endif %}
            
        

        <!--#####################=====   BEGIN BASE SCRIPTS   =====##########################-->
        
        <!--Jquery CDN-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <script type="text/javascript" src="{% static 'scripts/jquerymobile-swipeupdown.js' %}"></script>

        <!--Notification Manager Script-->
        <script type="text/javascript" src="{% static 'scripts/NotificationManager.js' %}"></script>
        <!--Yourbit Bit Manager Script-->
        <script type="text/javascript" src="{% static 'scripts/BitManager.js' %}"></script>
        <!--Yourbit Search Manager Script-->
        <script type="text/javascript" src="{% static 'scripts/SearchManager.js' %}"></script>
        <!--Yourbit Core Script Document (Global Functions)-->
        <script type="text/javascript" src="{% static 'scripts/yourbit_core.js' %}"></script>
        <script type"text/javascript">
        </script>
    </body>                

</html>
