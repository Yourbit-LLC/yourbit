{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Full-Screen Video Player</title>
    <style>
        #videoContainer {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: black;
        }
        
        #videoPlayer {
            width: 75vw;
            height: 75vh;
            background-color: black;
            top: 0px;
            margin-left: auto;
            margin-right: auto;
            display: block;
            transition: 0.3s ease-in-out;
        }
        
        #controlBar {
            display: grid;
            justify-content: space-between;
            background-color: rgba(0, 0, 0, 0.6);
            padding: 0.5rem;
            position: absolute;
            bottom: 0;
            width: 80vw;

            grid-template-columns: 3fr 1fr 3fr;
            transition: 0.5s ease-in-out;
            

        }

        #profileImage {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ccc;
            grid-column: 1;
        }

        #interactions-container {
            grid-column: 3;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
        }

        /* ... [previous CSS code] ... */

        #progressContainer {
            position: relative;
            background-color: #ccc;
            height: 4px;
            flex-grow: 1;
            margin: 0 10px;
            cursor: pointer;
        }

        #progress {
            background-color: #333;
            height: 100%;
            width: 0%;
        }

        #profileInfo {
            display: grid;
            position: relative;
            grid-template-columns: 1fr 3fr;
            grid-column: 1;
        }

        #handle {
            position: absolute;
            right: -5px; /* Half of the handle's size to make it centered */
            top: 50%;
            transform: translateY(-50%);
            background-color: #333;
            border-radius: 50%;
            width: 10px;
            height: 10px;
            display: none; /* Initially hidden */
        }

        #progressContainer:hover #handle, #handle:active {
            display: block;
        }

        button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            outline: none;
        }

        .player-sidebar {
            display: grid;
            grid-template-rows: 1fr 1fr 1fr;
            transition: 0.5s ease-in-out;

        }

        #sideBarLeft {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 10vw;
        }

        #sideBarRight {
            position: fixed;
            right: 0;
            top: 0;
            height: 100vh;
            width: 10vw;
        }

    </style>
</head>
<body>
    <div id="videoContainer">
        <div id="sideBarLeft" class="player-sidebar">
            <button style="grid-row:1;" id="addToPlaylist"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M160-320q-17 0-28.5-11.5T120-360q0-17 11.5-28.5T160-400h240q17 0 28.5 11.5T440-360q0 17-11.5 28.5T400-320H160Zm0-160q-17 0-28.5-11.5T120-520q0-17 11.5-28.5T160-560h400q17 0 28.5 11.5T600-520q0 17-11.5 28.5T560-480H160Zm0-160q-17 0-28.5-11.5T120-680q0-17 11.5-28.5T160-720h400q17 0 28.5 11.5T600-680q0 17-11.5 28.5T560-640H160Zm494 423q-8 0-15-2.5t-13-8.5l-86-86q-11-11-11.5-27.5T540-370q11-11 27.5-11.5T596-371l58 57 141-141q12-12 28.5-11.5T852-454q11 12 11.5 28T852-398L682-228q-6 6-13 8.5t-15 2.5Z"/></svg></button>
            <svg style="grid-row:2" xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:white;" d="M220-240v-480h60v480h-60Zm520 0L394-480l346-240v480Zm-60-240Zm0 125v-250L499-480l181 125Z"/></svg>
            <button style="grid-row:3;" id="comments-button"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M280-400h400q17 0 28.5-11.5T720-440q0-17-11.5-28.5T680-480H280q-17 0-28.5 11.5T240-440q0 17 11.5 28.5T280-400Zm0-120h400q17 0 28.5-11.5T720-560q0-17-11.5-28.5T680-600H280q-17 0-28.5 11.5T240-560q0 17 11.5 28.5T280-520Zm0-120h400q17 0 28.5-11.5T720-680q0-17-11.5-28.5T680-720H280q-17 0-28.5 11.5T240-680q0 17 11.5 28.5T280-640ZM160-240q-33 0-56.5-23.5T80-320v-480q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v623q0 27-24.5 37.5T812-148l-92-92H160Zm0-80v-480 480Zm594 0 46 45v-525H160v480h594Z"/></svg></button>
        </div>
        
        <video id="videoPlayer">
            <source src="{% static "videos/AdobeStock_425941747_Video_HD_Preview.mov" %}" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div id="controlBar">

            <!-- ... [rest of the code] ... -->
            
            <div id="progressContainer" onclick="setVideoPosition(event)">
                <div id="progress"></div>
                <div id="handle" draggable="true" ondrag="dragHandler(event)"></div>
            </div>

            <div id="profileInfo" style = "color:white">
                <div id="profileImage"></div>
                <div id="profileName">
                    <div id="profileName">John Doe</div>
                    <div id="profileUsername">@johndoe</div>
                </div>
            </div>
            <button style="grid-column: 2;" id="videoPlay" onclick="playPause()"><svg xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:white;" d="M366-232q-15 10-30.5 1T320-258v-450q0-18 15.5-27t30.5 1l354 226q14 9 14 25t-14 25L366-232Z"/></svg></button>
            
            <div id="interactions-container">
                <button id="like-button-id" class = "yb-like-button-player"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M620-520q25 0 42.5-17.5T680-580q0-25-17.5-42.5T620-640q-25 0-42.5 17.5T560-580q0 25 17.5 42.5T620-520Zm-280 0q25 0 42.5-17.5T400-580q0-25-17.5-42.5T340-640q-25 0-42.5 17.5T280-580q0 25 17.5 42.5T340-520Zm140 260q68 0 123.5-38.5T684-400h-66q-22 37-58.5 58.5T480-320q-43 0-79.5-21.5T342-400h-66q25 63 80.5 101.5T480-260Zm0 180q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Z"/></svg></button>
                <button id="dislike-button-id" class = "yb-dislike-button-player"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M620-520q25 0 42.5-17.5T680-580q0-25-17.5-42.5T620-640q-25 0-42.5 17.5T560-580q0 25 17.5 42.5T620-520Zm-280 0q25 0 42.5-17.5T400-580q0-25-17.5-42.5T340-640q-25 0-42.5 17.5T280-580q0 25 17.5 42.5T340-520Zm140 100q-68 0-123.5 38.5T276-280h66q22-37 58.5-58.5T480-360q43 0 79.5 21.5T618-280h66q-25-63-80.5-101.5T480-420Zm0 340q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-400Zm0 320q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Z"/></svg></button>
                <button id="videoOptions"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/></svg></button>
                <button id="videoVolume"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M560-131v-82q90-26 145-100t55-168q0-94-55-168T560-749v-82q124 28 202 125.5T840-481q0 127-78 224.5T560-131ZM120-360v-240h160l200-200v640L280-360H120Zm440 40v-322q47 22 73.5 66t26.5 96q0 51-26.5 94.5T560-320ZM400-606l-86 86H200v80h114l86 86v-252ZM300-480Z"/></svg></button>
                <button id="videoFullscreen" onclick="toggleFullscreen()"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M320-320h-80q-17 0-28.5-11.5T200-360q0-17 11.5-28.5T240-400h120q17 0 28.5 11.5T400-360v120q0 17-11.5 28.5T360-200q-17 0-28.5-11.5T320-240v-80Zm320 0v80q0 17-11.5 28.5T600-200q-17 0-28.5-11.5T560-240v-120q0-17 11.5-28.5T600-400h120q17 0 28.5 11.5T760-360q0 17-11.5 28.5T720-320h-80ZM320-640v-80q0-17 11.5-28.5T360-760q17 0 28.5 11.5T400-720v120q0 17-11.5 28.5T360-560H240q-17 0-28.5-11.5T200-600q0-17 11.5-28.5T240-640h80Zm320 0h80q17 0 28.5 11.5T760-600q0 17-11.5 28.5T720-560H600q-17 0-28.5-11.5T560-600v-120q0-17 11.5-28.5T600-760q17 0 28.5 11.5T640-720v80Z"/></svg></button>
            </div>
        </div>

        <div id="sideBarRight" class="player-sidebar">
            <button style="grid-row:1;" id="shareVideo"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M280-360v-240q0-33 23.5-56.5T360-680h326L583-783l57-57 200 200-200 200-57-56 103-104H360v240h-80Zm-80 240q-33 0-56.5-23.5T120-200v-600h80v600h480v-160h80v160q0 33-23.5 56.5T680-120H200Z"/></svg></button>
            <svg style="grid-row:2;" xmlns="http://www.w3.org/2000/svg" height="48" viewBox="0 -960 960 960" width="48"><path style="fill:white;" d="M680-240v-480h60v480h-60Zm-460 0v-480l346 240-346 240Zm60-240Zm0 125 181-125-181-125v250Z"/></svg>
            <button style="grid-row:3;" id="moreOptions"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path style="fill:white;" d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/></svg></button>
        </div>
        
    </div>

    <script>
        const videoPlayer = document.getElementById('videoPlayer');

        function playPause() {
            if (videoPlayer.paused) {
                videoPlayer.play();
            } else {
                videoPlayer.pause();
            }
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                if (videoContainer.requestFullscreen) {
                    videoContainer.requestFullscreen();
                } else if (videoContainer.mozRequestFullScreen) { /* Firefox */
                    videoContainer.mozRequestFullScreen();
                } else if (videoContainer.webkitRequestFullscreen) { /* Chrome, Safari & Opera */
                    videoContainer.webkitRequestFullscreen();
                } else if (videoContainer.msRequestFullscreen) { /* IE/Edge */
                    videoContainer.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari & Opera */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                    document.msExitFullscreen();
                }
            }
        }

        // ... [previous JS code] ...

        function setVideoPosition(event) {
            const progressBar = document.getElementById('progressContainer');
            const progress = document.getElementById('progress');
            const clickPosition = event.clientX - progressBar.getBoundingClientRect().left;
            const newTime = (clickPosition / progressBar.offsetWidth) * videoPlayer.duration;
            videoPlayer.currentTime = newTime;
            progress.style.width = (videoPlayer.currentTime / videoPlayer.duration) * 100 + '%';
        }

        function showVideoControls() {
            let controlBar = document.getElementById("controlBar");
            let sideBarLeft = document.getElementById("sideBarLeft");
            let sideBarRight = document.getElementById("sideBarRight");
            let videoElement = document.getElementById("videoPlayer");

            
            controlBar.style.transform = "translateY(100%)";
            controlBar.style.opacity = "1";
            sideBarLeft.style.transform = "translateX(100%)";
            controlBar.style.opacity = "1";
            sideBarRight.style.transform = "translateX(-100%)";
            controlBar.style.opacity = "1";
            videoElement.style.height = "75vh";
            videoElement.style.width = "75vw";
            
            videoPlayer.removeEventListener('click', showVideoControls);
            videoPlayer.addEventListener('click', hideVideoControls);
        }

        function hideVideoControls() {
            let controlBar = document.getElementById("controlBar");
            let sideBarLeft = document.getElementById("sideBarLeft");
            let sideBarRight = document.getElementById("sideBarRight");
            let videoElement = document.getElementById("videoPlayer");

            
            controlBar.style.transform = "translateY(-100%)";
            controlBar.style.opacity = "0";
            sideBarLeft.style.transform = "translateX(-100%)";
            sideBarLeft.style.opacity = "0";
            sideBarRight.style.transform = "translateX(100%)";
            sideBarRight.style.opacity = "0";
            videoElement.style.height = "100vh";
            videoElement.style.width = "100vw";

            videoPlayer.removeEventListener('click', hideVideoControls);
            videoPlayer.addEventListener('click', showVideoControls);

        }

        function dragHandler(event) {
            const progressBar = document.getElementById('progressContainer');
            const progress = document.getElementById('progress');
            const clickPosition = event.clientX - progressBar.getBoundingClientRect().left;
            const newTime = (clickPosition / progressBar.offsetWidth) * videoPlayer.duration;
            videoPlayer.currentTime = newTime;
            progress.style.width = (videoPlayer.currentTime / videoPlayer.duration) * 100 + '%';
        }

        videoPlayer.ontimeupdate = function() {
            const progress = document.getElementById('progress');
            progress.style.width = (videoPlayer.currentTime / videoPlayer.duration) * 100 + '%';
        };

        //On ready function in vanilla js
        document.addEventListener("DOMContentLoaded", function(event) {
            //do work
            toggleFullscreen();
            setTimeout(hideVideoControls, 1000);
            videoPlayer.addEventListener('click', showVideoControls);
        });
        
    </script>
</body>
</html>
