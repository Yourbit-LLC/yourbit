{% if conversations == True %}
        
{% for conversation in results %}
<div id="conversation-container-{{conversation.id}}" class="conversation-container yb-fillWidth" data-catid="{{conversation.id}}">
    <div id="conversation-{{conversation.id}}" class="
        yb-listItem conversation 
        {% comment %} {% if conversation.has_seen %} 
        seen 
        {%else%} 
        unseen 
        {% endif %} {% endcomment %}
        yb-font-auto
    "> 
        
                        
        <div class="full-result-image-container">
            {% if conversation.is_group %}
                <svg clip-rule="evenodd" fill-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="2" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" id="fi_12603619"><g transform="translate(-160 -240)"><path d="m190.415 299.004c-3.114-.207-6.233-1.04-9.174-2.554-.49-.252-1.094-.059-1.347.431s-.06 1.092.431 1.345c3.191 1.643 6.577 2.547 9.957 2.772.551.036 1.028-.38 1.064-.931.037-.55-.38-1.026-.931-1.063zm12.935-2.87c-2.81 1.544-5.913 2.502-9.103 2.812-.55.053-.952.542-.899 1.091.054.548.543.95 1.092.897 3.46-.336 6.826-1.375 9.874-3.049.484-.266.66-.874.394-1.357s-.874-.659-1.358-.394zm11.217-13.607c-.491-.171-1.018-.264-1.567-.264-2.632 0-4.769 2.135-4.769 4.764 0 1.33.547 2.534 1.429 3.399-.831.331-1.596.784-2.257 1.345-1.548 1.315-2.403 3.105-2.403 4.964v.483c0 .985.392 1.931 1.09 2.628.698.696 1.644 1.088 2.631 1.088h8.559c.986 0 1.933-.392 2.631-1.088.697-.697 1.089-1.643 1.089-2.628v-.483c0-1.859-.854-3.649-2.402-4.964-.661-.561-1.427-1.014-2.258-1.345.882-.865 1.43-2.069 1.43-3.399 0-1.338-.553-2.547-1.444-3.413.99-3.132 1.342-6.364 1.104-9.528-.041-.549-.522-.962-1.072-.921s-.964.521-.922 1.071c.206 2.75-.07 5.558-.869 8.291zm-46.886 1.08c-.894.866-1.45 2.079-1.45 3.42 0 1.33.547 2.534 1.429 3.399-.831.331-1.596.784-2.257 1.345-1.549 1.315-2.403 3.105-2.403 4.964v.483c0 .985.392 1.931 1.09 2.628.698.696 1.644 1.088 2.631 1.088h8.558c.987 0 1.933-.392 2.631-1.088.698-.697 1.09-1.643 1.09-2.628v-.483c0-1.859-.854-3.649-2.403-4.964-.661-.561-1.426-1.014-2.257-1.345.882-.865 1.429-2.069 1.429-3.399 0-2.629-2.137-4.764-4.769-4.764-.545 0-1.07.092-1.558.261-.722-2.478-1.039-5.074-.918-7.68.026-.551-.401-1.019-.952-1.045-.551-.025-1.02.401-1.045.952-.141 3.012.258 6.011 1.154 8.856zm27.886-13.609s4.293.001 7.834.001c2.54.001 4.599 2.06 4.599 4.6v5.682c0 2.33-1.734 4.279-4.02 4.658l-.658 2.897c-.076.335-.319.607-.643.721s-.683.055-.953-.158c0 0-4.297-3.393-4.297-3.393h-7.575c-1.576 0-2.972-.737-3.854-1.874v-9.532c0-1.988 1.612-3.6 3.6-3.6h5.9c.022 0 .045-.001.067-.002zm-11.567 3.602v10.004l-2.654 2.191c-.297.245-.709.298-1.058.136-.35-.162-.575-.51-.579-.895 0 0-.04-3.525-.04-3.525-2.097-.454-3.669-2.319-3.669-4.548v-7.31c0-2.568 2.088-4.653 4.659-4.653h13.662c1.989 0 3.688 1.247 4.356 3h-9.077c-3.093 0-5.6 2.507-5.6 5.6zm5.627 4.398h2c.552 0 1-.448 1-.999s-.448-.999-1-.999h-2c-.552 0-1 .448-1 .999s.448.999 1 .999zm6 0h2c.552 0 1-.448 1-.999s-.448-.999-1-.999h-2c-.552 0-1 .448-1 .999s.448.999 1 .999zm6 0h1.766c.552 0 1-.448 1-.999s-.448-.999-1-.999h-1.766c-.552 0-1 .448-1 .999s.448.999 1 .999zm-32.611-6.95c.457-2.13 1.221-4.232 2.31-6.245.466-.862.979-1.683 1.533-2.462.32-.45.214-1.074-.235-1.393-.45-.32-1.075-.214-1.395.235-.601.845-1.157 1.736-1.663 2.671-1.181 2.184-2.01 4.464-2.506 6.776-.115.539.229 1.07.769 1.186.54.115 1.072-.229 1.187-.768zm41.763-9.203c1.937 2.576 3.311 5.514 4.06 8.608.13.536.671.866 1.207.736.537-.129.867-.669.737-1.205-.813-3.357-2.303-6.544-4.405-9.339-.332-.441-.959-.53-1.4-.199-.442.331-.531.958-.199 1.399zm-22.119-10.682c-.831.33-1.596.784-2.257 1.345-1.549 1.315-2.403 3.105-2.403 4.964v.483c0 .985.392 1.93 1.09 2.627s1.644 1.089 2.631 1.089h8.558c.987 0 1.933-.392 2.631-1.089s1.09-1.642 1.09-2.627v-.483c0-1.859-.854-3.649-2.403-4.964-.661-.561-1.426-1.015-2.257-1.345.882-.865 1.429-2.069 1.429-3.399 0-2.629-2.137-4.764-4.769-4.764s-4.769 2.135-4.769 4.764c0 1.33.547 2.534 1.429 3.399zm-13.333 8.25c2.29-2.302 5.006-4.069 7.948-5.242.513-.204.763-.786.559-1.298-.205-.512-.787-.762-1.3-.557-3.193 1.273-6.14 3.191-8.625 5.689-.389.391-.387 1.024.004 1.413.392.389 1.025.387 1.414-.005zm24.826-5.469c1.023.379 2.031.834 3.019 1.367 1.888 1.019 3.581 2.26 5.062 3.673.399.38 1.033.366 1.414-.033s.366-1.032-.033-1.412c-1.607-1.533-3.444-2.88-5.492-3.985-1.071-.578-2.165-1.072-3.275-1.483-.517-.192-1.093.072-1.285.589s.072 1.092.59 1.284z"></path></g></svg>
                <svg height="32" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg"><path d="m160.154 327.336h41.447v57.479l68.679-57.479h81.567v-138.922h-191.693zm25-113.922h141.692v88.922h-65.648l-34.598 28.955v-28.955h-41.447v-88.922zm-66.722-117.298c8.544-8.776 13.82-20.739 13.82-33.916 0-26.854-21.879-48.7-48.772-48.7s-48.772 21.847-48.772 48.7c0 13.177 5.277 25.14 13.82 33.916-20.916 13.176-35.028 37.772-35.028 65.902v12.5h139.96v-12.5c0-28.13-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.068 10.664-23.7 23.772-23.7s23.772 10.632 23.772 23.7c0 13.067-10.664 23.699-23.772 23.699s-23.772-10.631-23.772-23.699zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm423.612-53.402c8.544-8.776 13.82-20.739 13.82-33.916 0-26.854-21.879-48.7-48.772-48.7s-48.772 21.847-48.772 48.7c0 13.177 5.277 25.14 13.82 33.916-20.917 13.176-35.028 37.772-35.028 65.901v12.5h139.96v-12.5c0-28.129-14.112-52.725-35.028-65.901zm-58.724-33.916c0-13.068 10.664-23.7 23.772-23.7s23.772 10.632 23.772 23.7c0 13.067-10.664 23.699-23.772 23.699s-23.772-10.631-23.772-23.699zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm-266.468 270.58c8.544-8.776 13.82-20.739 13.82-33.917 0-26.853-21.879-48.699-48.772-48.699s-48.772 21.847-48.772 48.699c0 13.177 5.277 25.141 13.82 33.917-20.916 13.176-35.028 37.773-35.028 65.902v12.5h139.96v-12.5c0-28.129-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.067 10.664-23.699 23.772-23.699s23.772 10.632 23.772 23.699c0 13.068-10.664 23.7-23.772 23.7s-23.772-10.632-23.772-23.7zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm423.612-53.402c8.544-8.776 13.82-20.739 13.82-33.917 0-26.853-21.879-48.699-48.772-48.699s-48.772 21.847-48.772 48.699c0 13.177 5.277 25.141 13.82 33.917-20.916 13.176-35.028 37.773-35.028 65.902v12.5h139.96v-12.5c0-28.129-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.067 10.664-23.699 23.772-23.699s23.772 10.632 23.772 23.699c0 13.068-10.664 23.7-23.772 23.7s-23.772-10.632-23.772-23.7zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm-220.897-412.806-10.649-22.619c32.222-15.171 66.757-22.863 102.646-22.863 35.886 0 70.418 7.691 102.639 22.86l-10.648 22.619c-28.865-13.588-59.815-20.479-91.991-20.479-32.179 0-63.131 6.892-91.997 20.482zm297.733 260.341c6.721-21.069 10.129-43.077 10.129-65.412 0-17.022-1.995-33.966-5.928-50.357l24.31-5.834c4.392 18.301 6.618 37.206 6.618 56.191 0 24.917-3.806 49.481-11.312 73.01zm-133.781 137.745 8.316 23.576c-25.73 9.076-52.737 13.678-80.271 13.678-27.532 0-54.54-4.602-80.273-13.678l8.315-23.576c23.055 8.131 47.265 12.254 71.958 12.254 24.694 0 48.904-4.123 71.955-12.254zm-281.802-253.889c-3.993 16.511-6.018 33.579-6.018 50.732 0 22.334 3.408 44.342 10.128 65.41l-23.817 7.598c-7.505-23.528-11.311-48.092-11.311-73.008 0-19.131 2.26-38.177 6.718-56.609z"/></svg>
            {% else %}
                <img class="full-result-image" style="width:100%; position: relative;" src="{{conversation.image}}">
            
            {% endif %}
        </div>
            
        
        <div id="message-contents font-medium">
            <b class="yb-font-auto yb-listItem-head" style="font-size: 13px; font-weight: 600;">
                    {{conversation.name}}
            </b>
            <p class="yb-font-auto yb-listItem-body">
                {% if conversation.preview != ""%}
                    {{conversation.preview | safe}}
                {% else %}
                    <i>Attachment</i>
                {% endif %}
            </p>

            <div class="font-white blend" id="conversation-time">
                <p class="font-small"><small><i>{{conversation.time}}</i></small></p>
            </div>

        </div>

    </div>
</div>
{% endfor %}
{% else %}
<div class="yb-fillWidth">
    <div class="yb-font-auto">
        <br>
        <p class="align-center yb-margin-T10">No conversations yet</p>
        <br>
        <button id="create-new-conversation" class="yb-button-flex font-gray-dark yb-button-halfWidth">+  Create New</button>
        <script>

            document.getElementById("create-new-conversation").addEventListener("click", function(){
                let container = yb_toggle2WayContainer('messages-new');
                if (container[0] === "closing"){
                    history.pushState(null, null, "/");
                    container[1].setAttribute("data-state", "empty");
                } else {
                    console.log("not closing")
                    let container_content = container[1].querySelector(".yb-2Way-content");
                    container[1].setAttribute("data-state", "messages-new");
                    yb_purgeScripts(yb_clearContainer);
                    
                    $(container_content).load("/messages/templates/new-message/")

                    history.pushState({}, "", '/messages/');
            
                }
            });
        </script>
    </div>
</div>
{% endif %}