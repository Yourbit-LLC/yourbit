{% if conversations == True %}
        
{% for conversation in results %}
<div id="conversation-container-{{conversation.id}}" class="conversation-container yb-fillWidth" data-catid="{{conversation.id}}">
    <div id="conversation-{{conversation.id}}" class="
        yb-listItem conversation 
        {% comment %} {% if conversation.has_seen %} 
        seen 
        {%else%} 
        unseen 
        {% endif %} {% endcomment %}
        yb-autoText
    "> 
        
                        
        <div class="full-result-image-container">
            {% if conversation.members.count > 2 %}
                <img class="full-result-image" style="width:100%; position: relative;" src="{{conversation.image}}">

            {% else %}
                <svg class="notification-icon" height="32" viewBox="0 0 24 24" width="32" xmlns="http://www.w3.org/2000/svg"><path d="m160.154 327.336h41.447v57.479l68.679-57.479h81.567v-138.922h-191.693zm25-113.922h141.692v88.922h-65.648l-34.598 28.955v-28.955h-41.447v-88.922zm-66.722-117.298c8.544-8.776 13.82-20.739 13.82-33.916 0-26.854-21.879-48.7-48.772-48.7s-48.772 21.847-48.772 48.7c0 13.177 5.277 25.14 13.82 33.916-20.916 13.176-35.028 37.772-35.028 65.902v12.5h139.96v-12.5c0-28.13-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.068 10.664-23.7 23.772-23.7s23.772 10.632 23.772 23.7c0 13.067-10.664 23.699-23.772 23.699s-23.772-10.631-23.772-23.699zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm423.612-53.402c8.544-8.776 13.82-20.739 13.82-33.916 0-26.854-21.879-48.7-48.772-48.7s-48.772 21.847-48.772 48.7c0 13.177 5.277 25.14 13.82 33.916-20.917 13.176-35.028 37.772-35.028 65.901v12.5h139.96v-12.5c0-28.129-14.112-52.725-35.028-65.901zm-58.724-33.916c0-13.068 10.664-23.7 23.772-23.7s23.772 10.632 23.772 23.7c0 13.067-10.664 23.699-23.772 23.699s-23.772-10.631-23.772-23.699zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm-266.468 270.58c8.544-8.776 13.82-20.739 13.82-33.917 0-26.853-21.879-48.699-48.772-48.699s-48.772 21.847-48.772 48.699c0 13.177 5.277 25.141 13.82 33.917-20.916 13.176-35.028 37.773-35.028 65.902v12.5h139.96v-12.5c0-28.129-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.067 10.664-23.699 23.772-23.699s23.772 10.632 23.772 23.699c0 13.068-10.664 23.7-23.772 23.7s-23.772-10.632-23.772-23.7zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm423.612-53.402c8.544-8.776 13.82-20.739 13.82-33.917 0-26.853-21.879-48.699-48.772-48.699s-48.772 21.847-48.772 48.699c0 13.177 5.277 25.141 13.82 33.917-20.916 13.176-35.028 37.773-35.028 65.902v12.5h139.96v-12.5c0-28.129-14.112-52.726-35.028-65.902zm-58.724-33.916c0-13.067 10.664-23.699 23.772-23.699s23.772 10.632 23.772 23.699c0 13.068-10.664 23.7-23.772 23.7s-23.772-10.632-23.772-23.7zm-19.848 87.318c4.92-22.163 22.611-38.618 43.62-38.618s38.7 16.455 43.62 38.618zm-220.897-412.806-10.649-22.619c32.222-15.171 66.757-22.863 102.646-22.863 35.886 0 70.418 7.691 102.639 22.86l-10.648 22.619c-28.865-13.588-59.815-20.479-91.991-20.479-32.179 0-63.131 6.892-91.997 20.482zm297.733 260.341c6.721-21.069 10.129-43.077 10.129-65.412 0-17.022-1.995-33.966-5.928-50.357l24.31-5.834c4.392 18.301 6.618 37.206 6.618 56.191 0 24.917-3.806 49.481-11.312 73.01zm-133.781 137.745 8.316 23.576c-25.73 9.076-52.737 13.678-80.271 13.678-27.532 0-54.54-4.602-80.273-13.678l8.315-23.576c23.055 8.131 47.265 12.254 71.958 12.254 24.694 0 48.904-4.123 71.955-12.254zm-281.802-253.889c-3.993 16.511-6.018 33.579-6.018 50.732 0 22.334 3.408 44.342 10.128 65.41l-23.817 7.598c-7.505-23.528-11.311-48.092-11.311-73.008 0-19.131 2.26-38.177 6.718-56.609z"/></svg>
            {% endif %}
        </div>
            
        
        <div id="message-contents font-medium">
            <b class="yb-autoText yb-listItem-head" style="font-size: 13px; font-weight: 600;">
                    {{conversation.name}}
            </b>
            <p class="yb-autoText yb-listItem-body">
                {% if conversation.preview != ""%}
                    {{conversation.preview}}
                {% else %}
                    <i>Attachment</i>
                {% endif %}
            </p>

            <div class="font-white blend" id="conversation-time">
                <p class="font-small"><small><i>{{conversation.time}}</i></small></p>
            </div>

        </div>

    </div>
</div>
{% endfor %}
{% else %}
<div class="yb-fillWidth">
    <div class="yb-autoText">
        <br>
        <p class="align-center yb-margin-T10">No conversations yet</p>
        <br>
        <button id="create-new-conversation" class="yb-button-flex font-gray-dark yb-button-halfWidth">+  Create New</button>
        <script>

            document.getElementById("create-new-conversation").addEventListener("click", function(){
                let container = yb_toggle2WayContainer('messages-new');
                if (container[0] === "closing"){
                    history.pushState(null, null, "/");
                    container[1].setAttribute("data-state", "empty");
                } else {
                    console.log("not closing")
                    let container_content = container[1].querySelector(".yb-2Way-content");
                    container[1].setAttribute("data-state", "messages-new");
                    yb_purgeScripts(yb_clearContainer);
                    
                    $(container_content).load("/messages/templates/new-message/")

                    history.pushState({}, "", '/messages/');
            
                }
            });
        </script>
    </div>
</div>
{% endif %}